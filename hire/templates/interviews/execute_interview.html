{% extends "base.html" %}
{% block title %}Conduct Interview{% endblock %}
{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h2 class="mb-0">Conduct Interview</h2>
      <small class="text-muted">Interview #{{ interview.id }}</small>
    </div>
    <a href="{{ url_for('interviews.interviewer_dashboard') }}" class="btn btn-secondary">Back</a>
  </div>

  <div class="card mb-3">
    <div class="card-body">
      <div class="row g-3">
        <div class="col-md-4">
          <div class="fw-semibold">Candidate</div>
          <div>{{ interview.candidate.name if interview.candidate else 'Candidate #' ~ interview.candidate_id }}</div>
          <div class="text-muted small">{{ interview.candidate.email if interview.candidate else '' }}</div>
        </div>
        <div class="col-md-3">
          <div class="fw-semibold">Job</div>
          <div>{{ interview.candidate.job.title if interview.candidate and interview.candidate.job else 'N/A' }}</div>
        </div>
        <div class="col-md-3">
          <div class="fw-semibold">Round</div>
          <div>{{ interview.round.name if interview.round else 'Round #' ~ interview.round_id }}</div>
        </div>
        <div class="col-md-2">
          <div class="fw-semibold">Scheduled (UTC)</div>
          <div>{{ interview.scheduled_at_utc.strftime('%Y-%m-%d %H:%M') if interview.scheduled_at_utc else 'Not set' }}</div>
        </div>
      </div>
    </div>
  </div>

  {% if mcq_questions %}
    <div class="alert alert-info d-flex justify-content-between align-items-center">
      <div>MCQ round: {{ interview.round.name }}</div>
      <a class="btn btn-outline-primary btn-sm" href="{{ url_for('interviews.mcq_take_interview', interview_id=interview.id) }}">Open MCQ Test</a>
    </div>
  {% endif %}

  <div class="card">
    <div class="card-header">Record Assessment</div>
    <div class="card-body">
      <form method="post">
        <div class="row g-3">
          <div class="col-md-3">
            <label class="form-label">Numeric Score</label>
            <input name="score_numeric" class="form-control" type="number" step="0.1" min="0" max="100" />
          </div>
          <div class="col-md-9">
            <label class="form-label">Score JSON (optional)</label>
            <textarea name="score_json" class="form-control" rows="3">{}</textarea>
          </div>
        </div>
        <div class="mt-3">
          <label class="form-label">Feedback</label>
          <textarea name="feedback" class="form-control" rows="5" placeholder="Notes, strengths, concerns"></textarea>
        </div>
        <div class="mt-3 text-end">
          <button class="btn btn-success">Submit Assessment</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
